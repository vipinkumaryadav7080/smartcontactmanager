<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="normal/base::layout(~{::section})">
<head>
  <meta charset="UTF-8" />
  <title>Add Contact Page</title>
</head>
<body>
<section>
  <div class="card mr-3 ml-3">
    <div class="card-body">
      <h1 class="text-center">Add Contact</h1>
      <div class="container-fluid mt-1">
        <div class="col-md-8 offset-md-2">

          <form enctype="multipart/form-data"
                th:action="@{/user/process-contact}"
                th:object="${contact}"
                method="POST"
                class="mt-2">

            <!-- First Name -->
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fa fa-plus"></i>
                </div>
              </div>
              <input type="text"
                     id="firstName"
                     th:field="*{name}"
                     placeholder="Enter name here"
                     class="form-control"
                     required
                     th:classappend="${#fields.hasErrors('name') ? 'is-invalid' : ''}" />
            </div>
            <div class="invalid-feedback"
                 th:if="${#fields.hasErrors('name')}"
                 th:errors="*{name}"></div>

            <!-- Second Name -->
            <div class="input-group mt-3">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fas fa-user-alt"></i>
                </div>
              </div>
              <input type="text"
                     id="secondName"
                     th:field="*{secondName}"
                     placeholder="Enter Nick Name here"
                     class="form-control"
                     required
                     th:classappend="${#fields.hasErrors('secondName') ? 'is-invalid' : ''}" />
            </div>
            <div class="invalid-feedback"
                 th:if="${#fields.hasErrors('secondName')}"
                 th:errors="*{secondName}"></div>

            <!-- Phone -->
            <div class="input-group mt-3">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class="fa fa-phone"></i></div>
              </div>
              <input type="text"
                     id="phone"
                     th:field="*{phone}"
                     placeholder="Enter phone number here"
                     class="form-control"
                     required
                     minlength="10"
                     maxlength="12"
                     pattern="[0-9]+"
                     title="Only numbers allowed, length must be 10â€“12 digits" />
            </div>
            <div class="text-danger"
                 th:if="${#fields.hasErrors('phone')}"
                 th:errors="*{phone}"></div>

            <!-- Email -->
            <div class="input-group mt-3">
              <div class="input-group-prepend">
                <div class="input-group-text">@</div>
              </div>
              <input type="email"
                     id="email"
                     th:field="*{email}"
                     placeholder="Enter Email here"
                     class="form-control"
                     required />
            </div>
            <div class="text-danger"
                 th:if="${#fields.hasErrors('email')}"
                 th:errors="*{email}"></div>

            <!-- Work -->
            <div class="input-group mt-3">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class="fa fa-briefcase"></i></div>
              </div>
              <input type="text"
                     id="work"
                     th:field="*{work}"
                     placeholder="Enter Your work"
                     class="form-control"
                     required />
            </div>
            <div class="text-danger"
                 th:if="${#fields.hasErrors('work')}"
                 th:errors="*{work}"></div>

            <!-- Description -->
            <div class="form-group mt-3">
              <textarea id="description"
                        th:field="*{description}"
                        placeholder="Enter contact description"
                        class="form-control tinymce"
                        required></textarea>
            </div>
            <div class="text-danger"
                 th:if="${#fields.hasErrors('description')}"
                 th:errors="*{description}"></div>

            <!-- TinyMCE Script -->
            <script src="https://cdn.tiny.cloud/1/8g82zflnqiozxhs6fmku7yf9gjtzzry63ak2q41aj0b554uy/tinymce/6/tinymce.min.js"
                    referrerpolicy="origin"></script>
            <script>
              document.addEventListener('DOMContentLoaded', function () {
                if (window.tinymce) {
                  tinymce.init({
                    selector: 'textarea.tinymce',
                    height: 350,
                    menubar: 'file edit view insert format tools table help',
                    toolbar: 'undo redo | bold italic underline | fontselect fontsizeselect | forecolor backcolor | alignleft aligncenter alignright | bullist numlist | link image table | removeformat | fullscreen',
                    plugins: 'advlist autolink lists link image charmap preview anchor searchreplace visualblocks code fullscreen insertdatetime media table help wordcount',
                    branding: false,
                    content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }',
                    setup: function (editor) {
                      editor.on('change', function () {
                        editor.save(); // update textarea for validation
                      });
                    }
                  });
                } else {
                  console.error('TinyMCE not loaded');
                }
              });
            </script>

            <!-- Image -->
            <div class="custom-file mt-2">
              <input type="file"
                     name="profileImage"
                     id="image"
                     required />
            </div>

            <!-- Button -->
            <div class="container text-center mt-2">
              <button class="btn btn-outline-primary">Save Contact</button>
            </div>

          </form>

        </div>
      </div>
    </div>
  </div>
  
 <script>
 
$(document).ready(function () {

 $(".item").removeClass("active");
 
 $("#add-link").addClass("active");
 
});
 </script>
  
</section>
</body>
</html>